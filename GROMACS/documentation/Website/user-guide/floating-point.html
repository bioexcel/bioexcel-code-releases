
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Floating point arithmetic &#8212; GROMACS 2018.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2018.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer guide" href="../dev-manual/index.html" />
    <link rel="prev" title="Environment Variables" href="environment-variables.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../dev-manual/index.html" title="Developer guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="environment-variables.html" title="Environment Variables"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GROMACS 2018.3</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">User guide</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="floating-point-arithmetic">
<span id="gmx-floating-point"></span><h1>Floating point arithmetic<a class="headerlink" href="#floating-point-arithmetic" title="Permalink to this headline">¶</a></h1>
<p>GROMACS spends its life doing arithmetic on real numbers, often summing many
millions of them. These real numbers are encoded on computers in so-called
binary floating-point representation. This representation is somewhat like
scientific exponential notation (but uses binary rather than decimal), and is
necessary for the fastest possible speed for calculations. Unfortunately the
laws of algebra only approximately apply to binary floating-point. In part,
this is because some real numbers that are represented simply and exactly in
decimal (like 1/5=0.2) have no exact representation in binary floating-point,
just as 1/3 cannot be represented in decimal. There are many sources you can
find with a search engine that discuss this issue more exhaustively, such as
<a class="reference external" href="https://en.wikipedia.org/wiki/Floating-point_arithmetic">Wikipedia</a> and
David Goldberg’s 1991 paper <em>What every computer scientist should know about
floating-point arithmetic</em> (<a class="reference external" href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">article</a>,
<a class="reference external" href="https://docs.oracle.com/cd/E37069_01/html/E39019/z400228248508.html">addendum</a>).
Bruce Dawson also has a written a number of very valuable blog posts on modern
floating-point programming at his
<a class="reference external" href="https://randomascii.wordpress.com/category/floating-point/">Random ASCII site</a>
that are worth reading.</p>
<p>So, the sum of a large number of binary representations of exact decimal
numbers need not equal the expected algebraic or decimal result. Users observe
this phenomenon in sums of partial charges expressed to two decimal places that
sometimes only approximate the integer total charge to which they contribute
(however a deviation in the first decimal place would always be indicative of a
badly-formed topology).  When GROMACS has to represent such floating-point
numbers in output, it sometimes uses a computer form of scientific notation
known as E notation. In such notation, a number like -9.999971e-01 is actually
-0.9999971, which is close enough to -1 for purposes of assessing the total
charge of a system.</p>
<p>It is also not appropriate for GROMACS to guess to round things, because such
rounding relies on assumptions about the inputs that need not be true. Instead
the user needs to understand how their tools work.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="environment-variables.html"
                        title="previous chapter">Environment Variables</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../dev-manual/index.html"
                        title="next chapter">Developer guide</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/user-guide/floating-point.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../dev-manual/index.html" title="Developer guide"
             >next</a> |</li>
        <li class="right" >
          <a href="environment-variables.html" title="Environment Variables"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">GROMACS 2018.3</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >User guide</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, GROMACS development team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.1.
    </div>
  </body>
</html>