<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Gromacs: src/gromacs/domdec/domdec_setup.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Gromacs
   &#160;<span id="projectnumber">2018.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.xhtml"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.xhtml"><span>Modules</span></a></li>
      <li><a href="pages.xhtml"><span>Other&#160;Docs</span></a></li>
      <li><a href="namespaces.xhtml"><span>Namespaces</span></a></li>
      <li><a href="annotated.xhtml"><span>Classes</span></a></li>
      <li class="current"><a href="files.xhtml"><span>Files</span></a></li>
      <li><a href="examples.xhtml"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.xhtml"><span>File&#160;List</span></a></li>
      <li><a href="globals.xhtml"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8a21c46af9718d1f610eb513153099d7.xhtml">src</a></li><li class="navelem"><a class="el" href="dir_a46192700e9e8ed44c648f0a55ee9a53.xhtml">gromacs</a></li><li class="navelem"><a class="el" href="dir_6598fadafaab67e0226add65c1e27d8d.xhtml">domdec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">domdec_setup.cpp File Reference<div class="ingroups"><a class="el" href="group__module__domdec.xhtml">Spatial domain decomposition (for parallelization over MPI)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="gmxpre_8h.xhtml">gmxpre.h</a>&quot;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;cmath&gt;</code><br/>
<code>#include &quot;<a class="el" href="domdec_8h.xhtml">gromacs/domdec/domdec.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="domdec__struct_8h.xhtml">gromacs/domdec/domdec_struct.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pme_8h.xhtml">gromacs/ewald/pme.h</a>&quot;</code><br/>
<code>#include &quot;gromacs/gmxlib/network.h&quot;</code><br/>
<code>#include &quot;gromacs/math/utilities.h&quot;</code><br/>
<code>#include &quot;gromacs/math/vec.h&quot;</code><br/>
<code>#include &quot;gromacs/mdlib/perf_est.h&quot;</code><br/>
<code>#include &quot;gromacs/mdtypes/commrec.h&quot;</code><br/>
<code>#include &quot;gromacs/mdtypes/inputrec.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="md__enums_8h.xhtml">gromacs/mdtypes/md_enums.h</a>&quot;</code><br/>
<code>#include &quot;gromacs/pbcutil/pbc.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="fatalerror_8h.xhtml">gromacs/utility/fatalerror.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="smalloc_8h.xhtml">gromacs/utility/smalloc.h</a>&quot;</code><br/>
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for domdec_setup.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="domdec__setup_8cpp__incl.svg" width="1622" height="470"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>This file defines functions used by the domdec module in its initial setup phase. </p>
<dl class="section author"><dt>Author</dt><dd>Berk Hess <a href="#" onclick="location.href='mai'+'lto:'+'hes'+'s@'+'kth'+'.s'+'e'; return false;">hess@<span style="display: none;">.nosp@m.</span>kth.<span style="display: none;">.nosp@m.</span>se</a> </dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a57ff5b6bf2520f0d722ed64fd98179d1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57ff5b6bf2520f0d722ed64fd98179d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a57ff5b6bf2520f0d722ed64fd98179d1">DD_GRID_MARGIN_PRES_SCALE</a>&#160;&#160;&#160;1.05</td></tr>
<tr class="memdesc:a57ff5b6bf2520f0d722ed64fd98179d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Margin for setting up the DD grid. <br/></td></tr>
<tr class="separator:a57ff5b6bf2520f0d722ed64fd98179d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a43161734fbe93b7ebeb45d0fd4d7481c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a43161734fbe93b7ebeb45d0fd4d7481c">factorize</a> (int n, int **fac, int **mfac)</td></tr>
<tr class="memdesc:a43161734fbe93b7ebeb45d0fd4d7481c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factorize <code>n</code>.  <a href="#a43161734fbe93b7ebeb45d0fd4d7481c">More...</a><br/></td></tr>
<tr class="separator:a43161734fbe93b7ebeb45d0fd4d7481c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0016a5670b5a775fd13c6368e2f71574"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0016a5670b5a775fd13c6368e2f71574"></a>
static <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a0016a5670b5a775fd13c6368e2f71574">largest_divisor</a> (int n)</td></tr>
<tr class="memdesc:a0016a5670b5a775fd13c6368e2f71574"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find largest divisor of <code>n</code> smaller than <code>n</code>. <br/></td></tr>
<tr class="separator:a0016a5670b5a775fd13c6368e2f71574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129572205b5f5477c3243ff7077a185e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a129572205b5f5477c3243ff7077a185e"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a129572205b5f5477c3243ff7077a185e">lcd</a> (int n1, int n2)</td></tr>
<tr class="memdesc:a129572205b5f5477c3243ff7077a185e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute largest common divisor of <code>n1</code> and <b>n2</b>. <br/></td></tr>
<tr class="separator:a129572205b5f5477c3243ff7077a185e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d342d95229679e058b2f570894a30fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d342d95229679e058b2f570894a30fb"></a>
static <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a6d342d95229679e058b2f570894a30fb">fits_pme_ratio</a> (int nrank_tot, int nrank_pme, float ratio)</td></tr>
<tr class="memdesc:a6d342d95229679e058b2f570894a30fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns TRUE when there are enough PME ranks for the ratio. <br/></td></tr>
<tr class="separator:a6d342d95229679e058b2f570894a30fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a869b10340003ea28f38d6a3310399421"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a869b10340003ea28f38d6a3310399421"></a>
static <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a869b10340003ea28f38d6a3310399421">fits_pp_pme_perf</a> (int ntot, int npme, float ratio)</td></tr>
<tr class="memdesc:a869b10340003ea28f38d6a3310399421"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns TRUE when npme out of ntot ranks doing PME is expected to give reasonable performance. <br/></td></tr>
<tr class="separator:a869b10340003ea28f38d6a3310399421"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a754557cf0560931689c8efc4f3ba2ae1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a754557cf0560931689c8efc4f3ba2ae1"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a754557cf0560931689c8efc4f3ba2ae1">guess_npme</a> (FILE *fplog, const gmx_mtop_t *mtop, const t_inputrec *ir, const matrix box, int nrank_tot)</td></tr>
<tr class="memdesc:a754557cf0560931689c8efc4f3ba2ae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a guess for the number of PME ranks to use. <br/></td></tr>
<tr class="separator:a754557cf0560931689c8efc4f3ba2ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade2070381dc6febed7d537244ee565e5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade2070381dc6febed7d537244ee565e5"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#ade2070381dc6febed7d537244ee565e5">div_up</a> (int n, int f)</td></tr>
<tr class="memdesc:ade2070381dc6febed7d537244ee565e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return <code>n</code> divided by <code>f</code> rounded up to the next integer. <br/></td></tr>
<tr class="separator:ade2070381dc6febed7d537244ee565e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9765dd6a98248ef7aedc8273dfefc52"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af9765dd6a98248ef7aedc8273dfefc52"></a>
<a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#af9765dd6a98248ef7aedc8273dfefc52">comm_box_frac</a> (const ivec dd_nc, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cutoff, const gmx_ddbox_t *ddbox)</td></tr>
<tr class="memdesc:af9765dd6a98248ef7aedc8273dfefc52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the volume fraction of the system that is communicated. <br/></td></tr>
<tr class="separator:af9765dd6a98248ef7aedc8273dfefc52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113bbfbec53eb8cb4844d54356777dec"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a113bbfbec53eb8cb4844d54356777dec"></a>
static <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a113bbfbec53eb8cb4844d54356777dec">inhomogeneous_z</a> (const t_inputrec *ir)</td></tr>
<tr class="memdesc:a113bbfbec53eb8cb4844d54356777dec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return whether the DD inhomogeneous in the z direction. <br/></td></tr>
<tr class="separator:a113bbfbec53eb8cb4844d54356777dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20163d5f7438af0d9178e5a056ad928d"><td class="memItemLeft" align="right" valign="top">static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a20163d5f7438af0d9178e5a056ad928d">comm_pme_cost_vol</a> (int npme, int a, int b, int c)</td></tr>
<tr class="memdesc:a20163d5f7438af0d9178e5a056ad928d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate cost of PME FFT communication.  <a href="#a20163d5f7438af0d9178e5a056ad928d">More...</a><br/></td></tr>
<tr class="separator:a20163d5f7438af0d9178e5a056ad928d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad72f459c54c0a36b0b64932722331ad0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad72f459c54c0a36b0b64932722331ad0"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#ad72f459c54c0a36b0b64932722331ad0">comm_cost_est</a> (<a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> limit, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cutoff, const matrix box, const gmx_ddbox_t *ddbox, int natoms, const t_inputrec *ir, float pbcdxr, int npme_tot, ivec nc)</td></tr>
<tr class="memdesc:ad72f459c54c0a36b0b64932722331ad0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate cost of communication for a possible domain decomposition. <br/></td></tr>
<tr class="separator:ad72f459c54c0a36b0b64932722331ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1080a0c7448792a32d56c1cac89f69"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c1080a0c7448792a32d56c1cac89f69"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a1c1080a0c7448792a32d56c1cac89f69">assign_factors</a> (const gmx_domdec_t *dd, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> limit, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cutoff, const matrix box, const gmx_ddbox_t *ddbox, int natoms, const t_inputrec *ir, float pbcdxr, int npme, int ndiv, int *div, int *mdiv, ivec ir_try, ivec opt)</td></tr>
<tr class="memdesc:a1c1080a0c7448792a32d56c1cac89f69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign penalty factors to possible domain decompositions, based on the estimated communication costs. <br/></td></tr>
<tr class="separator:a1c1080a0c7448792a32d56c1cac89f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933b928a6f2f8aa2d3bc0b64bd10d11c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a933b928a6f2f8aa2d3bc0b64bd10d11c"></a>
static <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a933b928a6f2f8aa2d3bc0b64bd10d11c">optimize_ncells</a> (FILE *fplog, int nnodes_tot, int npme_only, <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a> bDynLoadBal, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> dlb_scale, const gmx_mtop_t *mtop, const matrix box, const gmx_ddbox_t *ddbox, const t_inputrec *ir, gmx_domdec_t *dd, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cellsize_limit, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cutoff, <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a> bInterCGBondeds, ivec nc)</td></tr>
<tr class="memdesc:a933b928a6f2f8aa2d3bc0b64bd10d11c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the optimal distribution of DD cells for the simulation system and number of MPI ranks. <br/></td></tr>
<tr class="separator:a933b928a6f2f8aa2d3bc0b64bd10d11c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42ff2378b1d059ff107be5d1e6134573"><td class="memItemLeft" align="right" valign="top"><a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="domdec__setup_8cpp.xhtml#a42ff2378b1d059ff107be5d1e6134573">dd_choose_grid</a> (FILE *fplog, t_commrec *cr, gmx_domdec_t *dd, const t_inputrec *ir, const gmx_mtop_t *mtop, const matrix box, const gmx_ddbox_t *ddbox, int nPmeRanks, <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a> bDynLoadBal, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> dlb_scale, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cellsize_limit, <a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> cutoff_dd, <a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a> bInterCGBondeds)</td></tr>
<tr class="memdesc:a42ff2378b1d059ff107be5d1e6134573"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the optimal DD cell setup dd-&gt;nc and possibly npmenodes for the system.  <a href="#a42ff2378b1d059ff107be5d1e6134573">More...</a><br/></td></tr>
<tr class="separator:a42ff2378b1d059ff107be5d1e6134573"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a20163d5f7438af0d9178e5a056ad928d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static float comm_pme_cost_vol </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>npme</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Estimate cost of PME FFT communication. </p>
<p>This only takes the communication into account and not imbalance in the calculation. But the imbalance in communication and calculation are similar and therefore these formulas also prefer load balance in the FFT and pme_solve calculation. </p>

</div>
</div>
<a class="anchor" id="a42ff2378b1d059ff107be5d1e6134573"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a> dd_choose_grid </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fplog</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">t_commrec *&#160;</td>
          <td class="paramname"><em>cr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gmx_domdec_t *&#160;</td>
          <td class="paramname"><em>dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const t_inputrec *&#160;</td>
          <td class="paramname"><em>ir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gmx_mtop_t *&#160;</td>
          <td class="paramname"><em>mtop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const matrix&#160;</td>
          <td class="paramname"><em>box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const gmx_ddbox_t *&#160;</td>
          <td class="paramname"><em>ddbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nPmeRanks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a>&#160;</td>
          <td class="paramname"><em>bDynLoadBal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a>&#160;</td>
          <td class="paramname"><em>dlb_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a>&#160;</td>
          <td class="paramname"><em>cellsize_limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="real_8h.xhtml#a58a0c7cf2501f4492da833421be92547">real</a>&#160;</td>
          <td class="paramname"><em>cutoff_dd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="basedefinitions_8h.xhtml#a8fddad319f226e856400d190198d5151">gmx_bool</a>&#160;</td>
          <td class="paramname"><em>bInterCGBondeds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines the optimal DD cell setup dd-&gt;nc and possibly npmenodes for the system. </p>
<p>On the master node returns the actual cellsize limit used. </p>

</div>
</div>
<a class="anchor" id="a43161734fbe93b7ebeb45d0fd4d7481c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int factorize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>fac</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int **&#160;</td>
          <td class="paramname"><em>mfac</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Factorize <code>n</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Value to factorize </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fac</td><td>Pointer to array of factors (to be allocated in this function) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">mfac</td><td>Pointer to array of the number of times each factor repeats in the factorization (to be allocated in this function) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of unique factors </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 23 2018 14:57:16 for Gromacs by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
