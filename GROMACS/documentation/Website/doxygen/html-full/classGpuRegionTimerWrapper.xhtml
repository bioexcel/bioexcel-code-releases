<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Gromacs: GpuRegionTimerWrapper&lt; framework &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Gromacs
   &#160;<span id="projectnumber">2018.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.xhtml"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.xhtml"><span>Modules</span></a></li>
      <li><a href="pages.xhtml"><span>Other&#160;Docs</span></a></li>
      <li><a href="namespaces.xhtml"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.xhtml"><span>Classes</span></a></li>
      <li><a href="files.xhtml"><span>Files</span></a></li>
      <li><a href="examples.xhtml"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.xhtml"><span>Class&#160;List</span></a></li>
      <li><a href="classes.xhtml"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.xhtml"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.xhtml"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classGpuRegionTimerWrapper-members.xhtml">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">GpuRegionTimerWrapper&lt; framework &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;gromacs/gpu_utils/gpuregiontimer.h&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><h3>template&lt;GpuFramework framework&gt;<br/>
class GpuRegionTimerWrapper&lt; framework &gt;</h3>

<p>This is a GPU region timing wrapper class. It allows for host-side tracking of the accumulated execution timespans in GPU code (measuring kernel or transfers duration). It also partially tracks the correctness of the timer state transitions, as far as current implementation allows (see TODO in <a class="el" href="classGpuRegionTimerWrapper.xhtml#ae41e3366a0864560e324eb076c30e07e" title="Accumulates the last timespan of all the events used into the the total duration, and resets the inte...">getLastRangeTime()</a> for a disabled check). Internally it uses <a class="el" href="classGpuRegionTimerImpl.xhtml" title="This is a GPU region timing implementation interface. It should provide methods for measuring the las...">GpuRegionTimerImpl</a> for measuring regions. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad02014dfb38847883c55ae2b96b1ed79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#ad02014dfb38847883c55ae2b96b1ed79">openTimingRegion</a> (CommandStream s)</td></tr>
<tr class="memdesc:ad02014dfb38847883c55ae2b96b1ed79"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called before the region start.  <a href="#ad02014dfb38847883c55ae2b96b1ed79">More...</a><br/></td></tr>
<tr class="separator:ad02014dfb38847883c55ae2b96b1ed79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bed5ae5034ac52a7af3429d640a63af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#a0bed5ae5034ac52a7af3429d640a63af">closeTimingRegion</a> (CommandStream s)</td></tr>
<tr class="memdesc:a0bed5ae5034ac52a7af3429d640a63af"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called after the region end.  <a href="#a0bed5ae5034ac52a7af3429d640a63af">More...</a><br/></td></tr>
<tr class="separator:a0bed5ae5034ac52a7af3429d640a63af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae41e3366a0864560e324eb076c30e07e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#ae41e3366a0864560e324eb076c30e07e">getLastRangeTime</a> ()</td></tr>
<tr class="memdesc:ae41e3366a0864560e324eb076c30e07e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accumulates the last timespan of all the events used into the the total duration, and resets the internal timer state. To be called after <a class="el" href="classGpuRegionTimerWrapper.xhtml#a0bed5ae5034ac52a7af3429d640a63af" title="To be called after the region end. ">closeTimingRegion()</a> and the command stream of the event having been synchronized.  <a href="#ae41e3366a0864560e324eb076c30e07e">More...</a><br/></td></tr>
<tr class="separator:ae41e3366a0864560e324eb076c30e07e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a647be789c58881636e02f0a91c554838"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a647be789c58881636e02f0a91c554838"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#a647be789c58881636e02f0a91c554838">reset</a> ()</td></tr>
<tr class="memdesc:a647be789c58881636e02f0a91c554838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the implementation and total time/call count to zeroes. <br/></td></tr>
<tr class="separator:a647be789c58881636e02f0a91c554838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e31b7fa2ff770c2f4bf3ef13176c9ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e31b7fa2ff770c2f4bf3ef13176c9ab"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#a5e31b7fa2ff770c2f4bf3ef13176c9ab">getTotalTime</a> () const </td></tr>
<tr class="memdesc:a5e31b7fa2ff770c2f4bf3ef13176c9ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets total time recorded (in milliseconds). <br/></td></tr>
<tr class="separator:a5e31b7fa2ff770c2f4bf3ef13176c9ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60f3b1ada5e93eb9a0edf56b9efb1d8b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a60f3b1ada5e93eb9a0edf56b9efb1d8b"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#a60f3b1ada5e93eb9a0edf56b9efb1d8b">getCallCount</a> () const </td></tr>
<tr class="memdesc:a60f3b1ada5e93eb9a0edf56b9efb1d8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets total call count recorded. <br/></td></tr>
<tr class="separator:a60f3b1ada5e93eb9a0edf56b9efb1d8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bbbeac5bca3b81f6e5d45ab031e539"><td class="memItemLeft" align="right" valign="top">CommandEvent *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGpuRegionTimerWrapper.xhtml#ad4bbbeac5bca3b81f6e5d45ab031e539">fetchNextEvent</a> ()</td></tr>
<tr class="memdesc:ad4bbbeac5bca3b81f6e5d45ab031e539"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a pointer to a new timing event for passing into individual GPU API calls within the region if they require it (e.g. on OpenCL).  <a href="#ad4bbbeac5bca3b81f6e5d45ab031e539">More...</a><br/></td></tr>
<tr class="separator:ad4bbbeac5bca3b81f6e5d45ab031e539"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0bed5ae5034ac52a7af3429d640a63af"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;GpuFramework framework&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classGpuRegionTimerWrapper.xhtml">GpuRegionTimerWrapper</a>&lt; framework &gt;::closeTimingRegion </td>
          <td>(</td>
          <td class="paramtype">CommandStream&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To be called after the region end. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>The GPU command stream where the event being measured takes place. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad4bbbeac5bca3b81f6e5d45ab031e539"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;GpuFramework framework&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CommandEvent* <a class="el" href="classGpuRegionTimerWrapper.xhtml">GpuRegionTimerWrapper</a>&lt; framework &gt;::fetchNextEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a pointer to a new timing event for passing into individual GPU API calls within the region if they require it (e.g. on OpenCL). </p>
<dl class="section return"><dt>Returns</dt><dd>The pointer to the underlying single command timing event. </dd></dl>

</div>
</div>
<a class="anchor" id="ae41e3366a0864560e324eb076c30e07e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;GpuFramework framework&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classGpuRegionTimerWrapper.xhtml">GpuRegionTimerWrapper</a>&lt; framework &gt;::getLastRangeTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Accumulates the last timespan of all the events used into the the total duration, and resets the internal timer state. To be called after <a class="el" href="classGpuRegionTimerWrapper.xhtml#a0bed5ae5034ac52a7af3429d640a63af" title="To be called after the region end. ">closeTimingRegion()</a> and the command stream of the event having been synchronized. </p>
<dl class="section return"><dt>Returns</dt><dd>The last timespan (in milliseconds). </dd></dl>

</div>
</div>
<a class="anchor" id="ad02014dfb38847883c55ae2b96b1ed79"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;GpuFramework framework&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classGpuRegionTimerWrapper.xhtml">GpuRegionTimerWrapper</a>&lt; framework &gt;::openTimingRegion </td>
          <td>(</td>
          <td class="paramtype">CommandStream&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>To be called before the region start. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>The GPU command stream where the event being measured takes place. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/gromacs/gpu_utils/<a class="el" href="gpuregiontimer_8h.xhtml">gpuregiontimer.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 23 2018 14:57:25 for Gromacs by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
